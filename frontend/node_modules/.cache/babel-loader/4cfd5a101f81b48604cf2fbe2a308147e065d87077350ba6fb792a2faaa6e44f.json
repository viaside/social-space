{"ast":null,"code":"import _regeneratorRuntime from\"D:/\\u041F\\u0440\\u043E\\u0435\\u043A\\u0442\\u044B/social-space/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"D:/\\u041F\\u0440\\u043E\\u0435\\u043A\\u0442\\u044B/social-space/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _classCallCheck from\"D:/\\u041F\\u0440\\u043E\\u0435\\u043A\\u0442\\u044B/social-space/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"D:/\\u041F\\u0440\\u043E\\u0435\\u043A\\u0442\\u044B/social-space/frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _assertThisInitialized from\"D:/\\u041F\\u0440\\u043E\\u0435\\u043A\\u0442\\u044B/social-space/frontend/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js\";import _inherits from\"D:/\\u041F\\u0440\\u043E\\u0435\\u043A\\u0442\\u044B/social-space/frontend/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"D:/\\u041F\\u0440\\u043E\\u0435\\u043A\\u0442\\u044B/social-space/frontend/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import{Component}from\"react\";import getCookie from\"../../features/getCookie\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Login=/*#__PURE__*/function(_Component){_inherits(Login,_Component);var _super=_createSuper(Login);function Login(){var _this;_classCallCheck(this,Login);_this=_super.call(this);_this.state={isLogin:null,Login:\"\",Password:\"\"};_this.Login=_this.Login.bind(_assertThisInitialized(_this));_this.Password=_this.Password.bind(_assertThisInitialized(_this));_this.login=_this.login.bind(_assertThisInitialized(_this));return _this;}_createClass(Login,[{key:\"componentDidMount\",value:function(){var _componentDidMount=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return this.setState({isLogin:getCookie(\"isLogin\")});case 2:case\"end\":return _context.stop();}},_callee,this);}));function componentDidMount(){return _componentDidMount.apply(this,arguments);}return componentDidMount;}()},{key:\"Login\",value:function Login(event){this.setState({Login:event.target.value});}},{key:\"Password\",value:function Password(event){this.setState({Password:event.target.value});}},{key:\"login\",value:function login(){var _this2=this;fetch('https://localhost:7013/api/User/Login',{method:'post',headers:{'Accept':'application/json','Content-Type':'application/json'},body:JSON.stringify({Login:this.state.Login,Password:this.state.Password})}).then(function(Response){return Response.json();}).then(function(result){if(result[\"message\"]!==\"Success\"){alert(\"Неправельный логин или пароль\");}else{var date=new Date(Date.now()+86400e3*30);date=date.toUTCString();document.cookie=\"userId=\"+result.responseData+\"; expires=\"+date;document.cookie=\"isLogin=true; expires=\"+date;document.cookie=\"username=\"+_this2.state.Login+\"; expires=\"+date;window.location.reload();}});}},{key:\"render\",value:function render(){if(this.state.isLogin!==\"true\"){return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"\\u0412\\u0445\\u043E\\u0434\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"form\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u041B\\u043E\\u0433\\u0438\\u043D\"}),/*#__PURE__*/_jsx(\"input\",{onChange:this.Login,type:\"text\"}),/*#__PURE__*/_jsx(\"label\",{children:\"\\u041F\\u0430\\u0440\\u043E\\u043B\\u044C\"}),/*#__PURE__*/_jsx(\"input\",{onChange:this.Password,type:\"password\"}),/*#__PURE__*/_jsx(\"button\",{onClick:this.login,children:\"\\u0412\\u043E\\u0439\\u0442\\u0438\"})]})]});}}}]);return Login;}(Component);export{Login as default};","map":{"version":3,"names":["Component","getCookie","Login","state","isLogin","Password","bind","login","setState","event","target","value","fetch","method","headers","body","JSON","stringify","then","Response","json","result","alert","date","Date","now","toUTCString","document","cookie","responseData","window","location","reload"],"sources":["D:/Проекты/social-space/frontend/src/component/Account/Login.jsx"],"sourcesContent":["import { Component } from \"react\";\r\nimport getCookie from \"../../features/getCookie\";\r\n\r\nexport default class Login extends Component {\r\n    constructor(){\r\n        super();\r\n        this.state= {\r\n            isLogin: null,\r\n            Login: \"\",\r\n            Password: \"\",\r\n        }\r\n\r\n        this.Login = this.Login.bind(this);\r\n        this.Password = this.Password.bind(this);\r\n        this.login = this.login.bind(this);\r\n    }\r\n    \r\n    async componentDidMount() {\r\n        await this.setState({ isLogin: getCookie(\"isLogin\") });\r\n    }\r\n\r\n    Login(event) {\r\n        this.setState({ Login: event.target.value })\r\n    }\r\n\r\n    Password(event) {\r\n        this.setState({ Password: event.target.value })\r\n    }\r\n\r\n    login(){\r\n        fetch('https://localhost:7013/api/User/Login', {\r\n            method: 'post',\r\n            headers: {\r\n                'Accept': 'application/json',\r\n                'Content-Type': 'application/json'\r\n            },\r\n            body: JSON.stringify({\r\n                Login: this.state.Login,\r\n                Password: this.state.Password\r\n            })\r\n        })\r\n        .then((Response) => Response.json())\r\n        .then((result) => {\r\n            if (result[\"message\"] !== \"Success\") {\r\n                alert(\"Неправельный логин или пароль\");\r\n            }\r\n            else {\r\n                let date = new Date(Date.now() + 86400e3 * 30);\r\n                date = date.toUTCString();\r\n                document.cookie = \"userId=\" + result.responseData + \"; expires=\" + date;\r\n                document.cookie = \"isLogin=true; expires=\" + date;\r\n                document.cookie = \"username=\" + this.state.Login + \"; expires=\" + date;\r\n                window.location.reload();\r\n            }\r\n        })\r\n    }\r\n            \r\n    render() {\r\n        if(this.state.isLogin !== \"true\"){\r\n            return(\r\n                <div>\r\n                    <h1>Вход</h1>\r\n                    <div className=\"form\">\r\n                        <label>Логин</label>\r\n                        <input onChange={this.Login} type=\"text\"/>\r\n                        <label>Пароль</label>\r\n                        <input onChange={this.Password} type=\"password\"/>\r\n                        <button onClick={this.login}>Войти</button>\r\n                    </div>\r\n                </div>\r\n            );\r\n        }\r\n    }\r\n}"],"mappings":"+jCAAA,OAASA,SAAS,KAAQ,OAAO,CACjC,MAAOC,UAAS,KAAM,0BAA0B,CAAC,2FAE5BC,MAAK,8FACtB,gBAAa,uCACT,wBACA,MAAKC,KAAK,CAAE,CACRC,OAAO,CAAE,IAAI,CACbF,KAAK,CAAE,EAAE,CACTG,QAAQ,CAAE,EACd,CAAC,CAED,MAAKH,KAAK,CAAG,MAAKA,KAAK,CAACI,IAAI,+BAAM,CAClC,MAAKD,QAAQ,CAAG,MAAKA,QAAQ,CAACC,IAAI,+BAAM,CACxC,MAAKC,KAAK,CAAG,MAAKA,KAAK,CAACD,IAAI,+BAAM,CAAC,aACvC,CAAC,+IAED,0JACU,KAAI,CAACE,QAAQ,CAAC,CAAEJ,OAAO,CAAEH,SAAS,CAAC,SAAS,CAAE,CAAC,CAAC,2DACzD,kIAED,eAAMQ,KAAK,CAAE,CACT,IAAI,CAACD,QAAQ,CAAC,CAAEN,KAAK,CAAEO,KAAK,CAACC,MAAM,CAACC,KAAM,CAAC,CAAC,CAChD,CAAC,wBAED,kBAASF,KAAK,CAAE,CACZ,IAAI,CAACD,QAAQ,CAAC,CAAEH,QAAQ,CAAEI,KAAK,CAACC,MAAM,CAACC,KAAM,CAAC,CAAC,CACnD,CAAC,qBAED,gBAAO,iBACHC,KAAK,CAAC,uCAAuC,CAAE,CAC3CC,MAAM,CAAE,MAAM,CACdC,OAAO,CAAE,CACL,QAAQ,CAAE,kBAAkB,CAC5B,cAAc,CAAE,kBACpB,CAAC,CACDC,IAAI,CAAEC,IAAI,CAACC,SAAS,CAAC,CACjBf,KAAK,CAAE,IAAI,CAACC,KAAK,CAACD,KAAK,CACvBG,QAAQ,CAAE,IAAI,CAACF,KAAK,CAACE,QACzB,CAAC,CACL,CAAC,CAAC,CACDa,IAAI,CAAC,SAACC,QAAQ,QAAKA,SAAQ,CAACC,IAAI,EAAE,GAAC,CACnCF,IAAI,CAAC,SAACG,MAAM,CAAK,CACd,GAAIA,MAAM,CAAC,SAAS,CAAC,GAAK,SAAS,CAAE,CACjCC,KAAK,CAAC,+BAA+B,CAAC,CAC1C,CAAC,IACI,CACD,GAAIC,KAAI,CAAG,GAAIC,KAAI,CAACA,IAAI,CAACC,GAAG,EAAE,CAAG,OAAO,CAAG,EAAE,CAAC,CAC9CF,IAAI,CAAGA,IAAI,CAACG,WAAW,EAAE,CACzBC,QAAQ,CAACC,MAAM,CAAG,SAAS,CAAGP,MAAM,CAACQ,YAAY,CAAG,YAAY,CAAGN,IAAI,CACvEI,QAAQ,CAACC,MAAM,CAAG,wBAAwB,CAAGL,IAAI,CACjDI,QAAQ,CAACC,MAAM,CAAG,WAAW,CAAG,MAAI,CAACzB,KAAK,CAACD,KAAK,CAAG,YAAY,CAAGqB,IAAI,CACtEO,MAAM,CAACC,QAAQ,CAACC,MAAM,EAAE,CAC5B,CACJ,CAAC,CAAC,CACN,CAAC,sBAED,iBAAS,CACL,GAAG,IAAI,CAAC7B,KAAK,CAACC,OAAO,GAAK,MAAM,CAAC,CAC7B,mBACI,oCACI,oBAAI,0BAAI,EAAK,cACb,aAAK,SAAS,CAAC,MAAM,wBACjB,uBAAO,gCAAK,EAAQ,cACpB,cAAO,QAAQ,CAAE,IAAI,CAACF,KAAM,CAAC,IAAI,CAAC,MAAM,EAAE,cAC1C,uBAAO,sCAAM,EAAQ,cACrB,cAAO,QAAQ,CAAE,IAAI,CAACG,QAAS,CAAC,IAAI,CAAC,UAAU,EAAE,cACjD,eAAQ,OAAO,CAAE,IAAI,CAACE,KAAM,UAAC,gCAAK,EAAS,GACzC,GACJ,CAEd,CACJ,CAAC,mBArE8BP,SAAS,SAAvBE,KAAK"},"metadata":{},"sourceType":"module","externalDependencies":[]}