{"ast":null,"code":"import _regeneratorRuntime from\"D:/\\u041F\\u0440\\u043E\\u0435\\u043A\\u0442\\u044B/social-space/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"D:/\\u041F\\u0440\\u043E\\u0435\\u043A\\u0442\\u044B/social-space/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _classCallCheck from\"D:/\\u041F\\u0440\\u043E\\u0435\\u043A\\u0442\\u044B/social-space/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"D:/\\u041F\\u0440\\u043E\\u0435\\u043A\\u0442\\u044B/social-space/frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _assertThisInitialized from\"D:/\\u041F\\u0440\\u043E\\u0435\\u043A\\u0442\\u044B/social-space/frontend/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js\";import _inherits from\"D:/\\u041F\\u0440\\u043E\\u0435\\u043A\\u0442\\u044B/social-space/frontend/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"D:/\\u041F\\u0440\\u043E\\u0435\\u043A\\u0442\\u044B/social-space/frontend/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import{Component}from\"react\";import getCookie from\"../../../features/getCookie\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var AccountInfo=/*#__PURE__*/function(_Component){_inherits(AccountInfo,_Component);var _super=_createSuper(AccountInfo);function AccountInfo(){var _this;_classCallCheck(this,AccountInfo);_this=_super.call(this);_this.state={data:[],login:null,password:null,newLogin:null,newPassword:null};_this.logOut=_this.logOut.bind(_assertThisInitialized(_this));_this.Login=_this.Login.bind(_assertThisInitialized(_this));_this.Password=_this.Password.bind(_assertThisInitialized(_this));_this.saveChanges=_this.saveChanges.bind(_assertThisInitialized(_this));return _this;}_createClass(AccountInfo,[{key:\"componentDidMount\",value:function(){var _componentDidMount=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var _this2=this;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:fetch('https://localhost:7013/api/user/GetInfo/'+getCookie(\"userId\")).then(function(Response){return Response.json();}).then(/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(Result){var login,password;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_this2.setState({data:Result.responseData});login=document.getElementById(\"username\");password=document.getElementById(\"password\");login.value=Result.responseData.login;password.value=Result.responseData.password;case 5:case\"end\":return _context.stop();}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}());case 1:case\"end\":return _context2.stop();}},_callee2);}));function componentDidMount(){return _componentDidMount.apply(this,arguments);}return componentDidMount;}()},{key:\"logOut\",value:function logOut(){document.cookie=\"userId=\"+null;document.cookie=\"isLogin=false\";window.location.reload();}},{key:\"Login\",value:function Login(event){this.setState({login:event.target.value});}},{key:\"Password\",value:function Password(event){this.setState({password:event.target.value});}},{key:\"saveChanges\",value:function(){var _saveChanges=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(){return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:if(this.state.login){_context3.next=5;break;}_context3.next=3;return this.setState({newLogin:this.state.data[\"login\"]});case 3:_context3.next=7;break;case 5:_context3.next=7;return this.setState({newLogin:this.state.login});case 7:if(this.state.password){_context3.next=12;break;}_context3.next=10;return this.setState({newPassword:this.state.data[\"password\"]});case 10:_context3.next=14;break;case 12:_context3.next=14;return this.setState({newPassword:this.state.password});case 14:_context3.next=16;return fetch('https://localhost:7013/api/user/ChangeInfo',{method:'PUT',headers:{'Accept':'application/json','Content-Type':'application/json'},body:JSON.stringify({id:getCookie(\"userId\"),Login:this.state.newLogin,Password:this.state.newPassword})}).then(function(Response){return Response.json();}).then(function(Result){var res=JSON.stringify(Result);if(res==='{\"success\":false}'){alert(\"error\");}else{alert(\"изменения успешно сохранены\");}});case 16:case\"end\":return _context3.stop();}},_callee3,this);}));function saveChanges(){return _saveChanges.apply(this,arguments);}return saveChanges;}()},{key:\"render\",value:function render(){return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"AccountUserInfo\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"username\",children:\"\\u0418\\u043C\\u044F: \"}),/*#__PURE__*/_jsx(\"input\",{onChange:this.Login,type:\"text\",name:\"username\",id:\"username\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"AccountUserInfo\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",children:\"\\u041F\\u0430\\u0440\\u043E\\u043B\\u044C: \"}),/*#__PURE__*/_jsx(\"input\",{onChange:this.Password,type:\"text\",name:\"password\",id:\"password\"})]}),/*#__PURE__*/_jsx(\"button\",{onClick:this.saveChanges,children:\"\\u0421\\u043E\\u0445\\u0440\\u0430\\u043D\\u0438\\u0442\\u044C\"}),/*#__PURE__*/_jsx(\"button\",{onClick:this.logOut,children:\"\\u0412\\u044B\\u0439\\u0442\\u0438\"})]});}}]);return AccountInfo;}(Component);export{AccountInfo as default};","map":{"version":3,"names":["Component","getCookie","AccountInfo","state","data","login","password","newLogin","newPassword","logOut","bind","Login","Password","saveChanges","fetch","then","Response","json","Result","setState","responseData","document","getElementById","value","cookie","window","location","reload","event","target","method","headers","body","JSON","stringify","id","res","alert"],"sources":["D:/Проекты/social-space/frontend/src/component/Account/AccountInfo/AccountInfo.jsx"],"sourcesContent":["import { Component } from \"react\";\r\nimport getCookie from \"../../../features/getCookie\";\r\n\r\nexport default class AccountInfo extends Component {\r\n    constructor(){\r\n        super();\r\n        this.state= {\r\n            data: [],\r\n            login: null,\r\n            password: null,\r\n            newLogin: null,\r\n            newPassword: null,\r\n        }\r\n\r\n        this.logOut = this.logOut.bind(this);\r\n\r\n        this.Login = this.Login.bind(this);\r\n        this.Password = this.Password.bind(this);\r\n        this.saveChanges = this.saveChanges.bind(this);\r\n    }\r\n    \r\n    async componentDidMount() {\r\n        fetch('https://localhost:7013/api/user/GetInfo/' + getCookie(\"userId\"))\r\n        .then((Response) => Response.json())\r\n        .then(async (Result) => {\r\n            this.setState({ data: Result.responseData });\r\n            let login = document.getElementById(\"username\");\r\n            let password = document.getElementById(\"password\")\r\n\r\n            login.value = Result.responseData.login;\r\n            password.value = Result.responseData.password;\r\n        });\r\n    }\r\n\r\n    logOut(){\r\n        document.cookie = \"userId=\" + null;\r\n        document.cookie = \"isLogin=false\";\r\n        window.location.reload();\r\n    }\r\n\r\n    Login(event){\r\n        this.setState({ login: event.target.value })\r\n    }\r\n\r\n    Password(event){\r\n        this.setState({ password: event.target.value })\r\n    }\r\n\r\n    async saveChanges(){\r\n        if(!this.state.login){\r\n            await this.setState({ newLogin: this.state.data[\"login\"] });\r\n        } else{\r\n            await this.setState({ newLogin: this.state.login });\r\n        }\r\n\r\n        if(!this.state.password){\r\n            await this.setState({ newPassword: this.state.data[\"password\"] });\r\n        } else{\r\n            await this.setState({ newPassword: this.state.password });\r\n        }\r\n        await fetch('https://localhost:7013/api/user/ChangeInfo', {\r\n            method: 'PUT',\r\n            headers: {\r\n                'Accept': 'application/json',\r\n                'Content-Type': 'application/json'\r\n            },\r\n            body: JSON.stringify({\r\n                id: getCookie(\"userId\"),\r\n                Login: this.state.newLogin,\r\n                Password: this.state.newPassword,\r\n            })\r\n        }).then((Response) => Response.json())\r\n            .then((Result) => {\r\n                let res = JSON.stringify(Result);\r\n                if (res === '{\"success\":false}') {\r\n                    alert(\"error\");\r\n                }\r\n                else {\r\n                    alert(\"изменения успешно сохранены\");\r\n                }\r\n        })\r\n    }\r\n\r\n    render() {\r\n        return(\r\n            <div>\r\n                <div className=\"AccountUserInfo\">\r\n                    <label htmlFor=\"username\">Имя: </label>\r\n                    <input onChange={this.Login} type=\"text\" name=\"username\" id=\"username\"/>\r\n                </div>\r\n                <div className=\"AccountUserInfo\">\r\n                    <label htmlFor=\"password\">Пароль: </label>\r\n                    <input onChange={this.Password} type=\"text\" name=\"password\" id=\"password\"/>\r\n                </div>\r\n                <button onClick={this.saveChanges}>Сохранить</button>\r\n                <button onClick={this.logOut}>Выйти</button>\r\n            </div>\r\n        );\r\n    }\r\n}"],"mappings":"+jCAAA,OAASA,SAAS,KAAQ,OAAO,CACjC,MAAOC,UAAS,KAAM,6BAA6B,CAAC,2FAE/BC,YAAW,0GAC5B,sBAAa,6CACT,wBACA,MAAKC,KAAK,CAAE,CACRC,IAAI,CAAE,EAAE,CACRC,KAAK,CAAE,IAAI,CACXC,QAAQ,CAAE,IAAI,CACdC,QAAQ,CAAE,IAAI,CACdC,WAAW,CAAE,IACjB,CAAC,CAED,MAAKC,MAAM,CAAG,MAAKA,MAAM,CAACC,IAAI,+BAAM,CAEpC,MAAKC,KAAK,CAAG,MAAKA,KAAK,CAACD,IAAI,+BAAM,CAClC,MAAKE,QAAQ,CAAG,MAAKA,QAAQ,CAACF,IAAI,+BAAM,CACxC,MAAKG,WAAW,CAAG,MAAKA,WAAW,CAACH,IAAI,+BAAM,CAAC,aACnD,CAAC,qJAED,yJACII,KAAK,CAAC,0CAA0C,CAAGb,SAAS,CAAC,QAAQ,CAAC,CAAC,CACtEc,IAAI,CAAC,SAACC,QAAQ,QAAKA,SAAQ,CAACC,IAAI,EAAE,GAAC,CACnCF,IAAI,4FAAC,iBAAOG,MAAM,sIACf,MAAI,CAACC,QAAQ,CAAC,CAAEf,IAAI,CAAEc,MAAM,CAACE,YAAa,CAAC,CAAC,CACxCf,KAAK,CAAGgB,QAAQ,CAACC,cAAc,CAAC,UAAU,CAAC,CAC3ChB,QAAQ,CAAGe,QAAQ,CAACC,cAAc,CAAC,UAAU,CAAC,CAElDjB,KAAK,CAACkB,KAAK,CAAGL,MAAM,CAACE,YAAY,CAACf,KAAK,CACvCC,QAAQ,CAACiB,KAAK,CAAGL,MAAM,CAACE,YAAY,CAACd,QAAQ,CAAC,qDACjD,+DAAC,CAAC,uDACN,mIAED,iBAAQ,CACJe,QAAQ,CAACG,MAAM,CAAG,SAAS,CAAG,IAAI,CAClCH,QAAQ,CAACG,MAAM,CAAG,eAAe,CACjCC,MAAM,CAACC,QAAQ,CAACC,MAAM,EAAE,CAC5B,CAAC,qBAED,eAAMC,KAAK,CAAC,CACR,IAAI,CAACT,QAAQ,CAAC,CAAEd,KAAK,CAAEuB,KAAK,CAACC,MAAM,CAACN,KAAM,CAAC,CAAC,CAChD,CAAC,wBAED,kBAASK,KAAK,CAAC,CACX,IAAI,CAACT,QAAQ,CAAC,CAAEb,QAAQ,CAAEsB,KAAK,CAACC,MAAM,CAACN,KAAM,CAAC,CAAC,CACnD,CAAC,iHAED,4IACQ,IAAI,CAACpB,KAAK,CAACE,KAAK,iDACV,KAAI,CAACc,QAAQ,CAAC,CAAEZ,QAAQ,CAAE,IAAI,CAACJ,KAAK,CAACC,IAAI,CAAC,OAAO,CAAE,CAAC,CAAC,6DAErD,KAAI,CAACe,QAAQ,CAAC,CAAEZ,QAAQ,CAAE,IAAI,CAACJ,KAAK,CAACE,KAAM,CAAC,CAAC,WAGnD,IAAI,CAACF,KAAK,CAACG,QAAQ,mDACb,KAAI,CAACa,QAAQ,CAAC,CAAEX,WAAW,CAAE,IAAI,CAACL,KAAK,CAACC,IAAI,CAAC,UAAU,CAAE,CAAC,CAAC,iEAE3D,KAAI,CAACe,QAAQ,CAAC,CAAEX,WAAW,CAAE,IAAI,CAACL,KAAK,CAACG,QAAS,CAAC,CAAC,iCAEvDQ,MAAK,CAAC,4CAA4C,CAAE,CACtDgB,MAAM,CAAE,KAAK,CACbC,OAAO,CAAE,CACL,QAAQ,CAAE,kBAAkB,CAC5B,cAAc,CAAE,kBACpB,CAAC,CACDC,IAAI,CAAEC,IAAI,CAACC,SAAS,CAAC,CACjBC,EAAE,CAAElC,SAAS,CAAC,QAAQ,CAAC,CACvBU,KAAK,CAAE,IAAI,CAACR,KAAK,CAACI,QAAQ,CAC1BK,QAAQ,CAAE,IAAI,CAACT,KAAK,CAACK,WACzB,CAAC,CACL,CAAC,CAAC,CAACO,IAAI,CAAC,SAACC,QAAQ,QAAKA,SAAQ,CAACC,IAAI,EAAE,GAAC,CACjCF,IAAI,CAAC,SAACG,MAAM,CAAK,CACd,GAAIkB,IAAG,CAAGH,IAAI,CAACC,SAAS,CAAChB,MAAM,CAAC,CAChC,GAAIkB,GAAG,GAAK,mBAAmB,CAAE,CAC7BC,KAAK,CAAC,OAAO,CAAC,CAClB,CAAC,IACI,CACDA,KAAK,CAAC,6BAA6B,CAAC,CACxC,CACR,CAAC,CAAC,8DACL,iHAED,iBAAS,CACL,mBACI,oCACI,aAAK,SAAS,CAAC,iBAAiB,wBAC5B,cAAO,OAAO,CAAC,UAAU,UAAC,sBAAK,EAAQ,cACvC,cAAO,QAAQ,CAAE,IAAI,CAAC1B,KAAM,CAAC,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC,EAAE,CAAC,UAAU,EAAE,GACtE,cACN,aAAK,SAAS,CAAC,iBAAiB,wBAC5B,cAAO,OAAO,CAAC,UAAU,UAAC,wCAAQ,EAAQ,cAC1C,cAAO,QAAQ,CAAE,IAAI,CAACC,QAAS,CAAC,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC,EAAE,CAAC,UAAU,EAAE,GACzE,cACN,eAAQ,OAAO,CAAE,IAAI,CAACC,WAAY,UAAC,wDAAS,EAAS,cACrD,eAAQ,OAAO,CAAE,IAAI,CAACJ,MAAO,UAAC,gCAAK,EAAS,GAC1C,CAEd,CAAC,yBA/FoCT,SAAS,SAA7BE,WAAW"},"metadata":{},"sourceType":"module","externalDependencies":[]}