{"ast":null,"code":"import _slicedToArray from\"D:/\\u041F\\u0440\\u043E\\u0435\\u043A\\u0442\\u044B/social-space/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import convertDate from\"../../features/convertDate\";import{useSelector,useDispatch}from'react-redux';import{close}from'../../features/redux/openMessageSlice';import{useState}from\"react\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";export default function ChannelOpen(props){var openMessage=useSelector(function(state){return state.openMessage.value;});var idMessage=useSelector(function(state){return state.idMessage.value;});var dispatch=useDispatch();var _useState=useState(),_useState2=_slicedToArray(_useState,2),Answer=_useState2[0],setAnswer=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),Comment=_useState4[0],setComment=_useState4[1];var message=[];if(props.data!=null){props.data.forEach(function(element){if(element.messageId===idMessage&&(element.type===\"channel\"||element.type===\"superchannel\")){var data=[element.text,convertDate(element.date),element.chatId,element.messageId,element.username,element.answers,element.comments];message.push(data);}});}var sendMessage=function sendMessage(){fetch(\"https://localhost:7013/api/telegram/sendMessage/\"+message[0][2]+\"&\"+Answer+\"&\"+message[0][3]);};var sendComment=function sendComment(){fetch(\"https://localhost:7013/api/telegram/AddComment/\"+message[0][3]+\"&\"+Comment);};var textHandlerAnswer=function textHandlerAnswer(event){setAnswer(event.target.value);};var textHandlerComent=function textHandlerComent(event){setComment(event.target.value);};if(openMessage===false){return null;}else{return/*#__PURE__*/_jsxs(\"div\",{className:\"OpenChat\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[\"\\u041E\\u0442: \",message[0][4]]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"\\u0421\\u043E\\u043E\\u0431\\u0449\\u0435\\u043D\\u0438\\u044F: \",message[0][0]]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"\\u0412\\u0440\\u0435\\u043C\\u044F: \",message[0][1]]}),/*#__PURE__*/_jsx(\"p\",{children:\"\\u041E\\u0442\\u0432\\u0435\\u0442\\u044B:\"}),message[0][5]!=undefined?message[0][5].reverse().map(function(answer){return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text\",children:answer.split(\"/\")[0]}),/*#__PURE__*/_jsx(\"p\",{className:\"time\",children:answer.split(\"/\")[1]})]});}):/*#__PURE__*/_jsx(\"p\",{children:\"\\u041E\\u0442\\u0432\\u0435\\u0442\\u043E\\u0432 \\u043D\\u0435\\u0442\\u0443\"}),/*#__PURE__*/_jsx(\"textarea\",{onChange:function onChange(event){return textHandlerAnswer(event);},name:\"message\",id:\"message\"}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return sendMessage();},children:\"\\u041E\\u0442\\u0432\\u0435\\u0442\\u0438\\u0442\\u044C\"}),/*#__PURE__*/_jsx(\"p\",{children:\"\\u041A\\u043E\\u043C\\u0435\\u043D\\u0442\\u0430\\u0440\\u0438\\u0438:\"}),message[0][6]!=undefined?message[0][6].reverse().map(function(comments){return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text\",children:comments.split(\"/\")[0]}),/*#__PURE__*/_jsx(\"p\",{className:\"time\",children:comments.split(\"/\")[1]})]});}):/*#__PURE__*/_jsx(\"p\",{children:\"\\u041A\\u043E\\u043C\\u0435\\u043D\\u0442\\u0430\\u0440\\u0438\\u0439 \\u043D\\u0435\\u0442\\u0443\"}),/*#__PURE__*/_jsx(\"textarea\",{onChange:function onChange(event){return textHandlerComent(event);},name:\"message\",id:\"message\"}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return sendComment();},children:\"\\u041D\\u0430\\u043F\\u0438\\u0441\\u0430\\u0442\\u044C \\u043A\\u043E\\u043C\\u043C\\u0435\\u043D\\u0442\\u0430\\u0440\\u0438\\u0439\"}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return dispatch(close());},children:\"\\u0417\\u0430\\u043A\\u0440\\u044B\\u0442\\u044C\"})]});}}","map":{"version":3,"names":["convertDate","useSelector","useDispatch","close","useState","ChannelOpen","props","openMessage","state","value","idMessage","dispatch","Answer","setAnswer","Comment","setComment","message","data","forEach","element","messageId","type","text","date","chatId","username","answers","comments","push","sendMessage","fetch","sendComment","textHandlerAnswer","event","target","textHandlerComent","undefined","reverse","map","answer","split"],"sources":["D:/Проекты/social-space/frontend/src/component/Channel/ChannelOpen.jsx"],"sourcesContent":["import convertDate from \"../../features/convertDate\";\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { close } from '../../features/redux/openMessageSlice';\r\nimport { useState } from \"react\";\r\n\r\nexport default function ChannelOpen(props) {\r\n    const openMessage = useSelector((state) => state.openMessage.value)\r\n    const idMessage = useSelector((state) => state.idMessage.value)\r\n    const dispatch = useDispatch()\r\n    const [Answer, setAnswer] = useState();\r\n    const [Comment, setComment] = useState();\r\n\r\n    let message = [];\r\n\r\n    if(props.data != null){\r\n        props.data.forEach(element => {\r\n            if(element.messageId === idMessage && (element.type === \"channel\" || element.type === \"superchannel\")){\r\n                let data = [element.text, convertDate(element.date), element.chatId, element.messageId, element.username, element.answers, element.comments];\r\n                message.push(data);\r\n            }\r\n        });\r\n\r\n    }\r\n\r\n    const sendMessage = () => {\r\n        fetch(\"https://localhost:7013/api/telegram/sendMessage/\" + message[0][2] + \"&\" + Answer + \"&\" + message[0][3]);\r\n    }\r\n\r\n    const sendComment = () => {\r\n        fetch(\"https://localhost:7013/api/telegram/AddComment/\" + message[0][3] + \"&\" + Comment);\r\n    }\r\n\r\n    const textHandlerAnswer = (event) => {\r\n        setAnswer(event.target.value);\r\n    }\r\n\r\n    const textHandlerComent = (event) => {\r\n        setComment(event.target.value);\r\n    }\r\n\r\n    if(openMessage === false){\r\n        return null\r\n    } else{\r\n        return(\r\n            <div className = \"OpenChat\">   \r\n                <p>От: { message[0][4] }</p>\r\n                <p>Сообщения: { message[0][0] }</p>\r\n                <p>Время: { message[0][1] }</p>\r\n                <p>Ответы:</p>\r\n                    { message[0][5] != undefined ? message[0][5].reverse().map((answer) => {\r\n                        return(\r\n                            <div>\r\n                                <p className = \"text\">{ answer.split(\"/\")[0] }</p>\r\n                                <p className = \"time\">{ answer.split(\"/\")[1] }</p> \r\n                            </div>\r\n                        )\r\n                    }) : <p>Ответов нету</p>}\r\n                <textarea onChange={(event) => textHandlerAnswer(event) } name=\"message\" id=\"message\"></textarea>\r\n                <button onClick={() => sendMessage()}>Ответить</button>\r\n                <p>Коментарии:</p>\r\n                    { message[0][6] != undefined ? message[0][6].reverse().map((comments) => {\r\n                        return(\r\n                            <div>\r\n                                <p className = \"text\">{ comments.split(\"/\")[0] }</p>\r\n                                <p className = \"time\">{ comments.split(\"/\")[1] }</p> \r\n                            </div>\r\n                        )\r\n                    }) : <p>Коментарий нету</p>}\r\n                <textarea onChange={(event) => textHandlerComent(event) } name=\"message\" id=\"message\"></textarea>\r\n                <button onClick={() => sendComment()}>Написать комментарий</button>\r\n                <button onClick={() => dispatch(close())}>Закрыть</button>\r\n            </div>\r\n        );\r\n    }\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}