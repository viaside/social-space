{"ast":null,"code":"import _regeneratorRuntime from\"D:/\\u041F\\u0440\\u043E\\u0435\\u043A\\u0442\\u044B/social-space/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"D:/\\u041F\\u0440\\u043E\\u0435\\u043A\\u0442\\u044B/social-space/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import React from'react';import{useSelector,useDispatch}from'react-redux';import{open}from'../../features/redux/openMessageSlice';import{setMessageChat}from'../../features/redux/idMessageSlice';import convertDate from'../../features/convertDate';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function GroupOpenMessage(props){var openChat=useSelector(function(state){return state.openChat.value;});var idChat=useSelector(function(state){return state.idChat.value;});var dispatch=useDispatch();var Message=[];if(props.data!=null){props.data.sort(function(a,b){if(a.date<b.date){return 1;}if(a.date>b.date){return-1;}return 0;}).forEach(function(element){if(element.type===\"group\"&&element.nameFrom===idChat||element.type===\"supergroup\"&&element.nameFrom===idChat){if(element.text!==null){var data=[element.text,convertDate(element.date),element.chatId,element.messageId,element.username,element.answers,element.comments,element.userAvatar,element.textPhoto];Message.push(data);}else{var _data=[\"*Изображение\",convertDate(element.date),element.chatId,element.messageId,element.username,element.answers,element.comments,element.userAvatar,element.textPhoto];Message.push(_data);}}});}var activeMessage=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(id){var i,element;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:for(i=0;i<=Message.length;i++){element=document.getElementById(\"message\"+i);if(element){if(id===\"message\"+i){element.style.backgroundColor=\"#353535\";}else{element.style.backgroundColor=null;}}}case 1:case\"end\":return _context.stop();}},_callee);}));return function activeMessage(_x){return _ref.apply(this,arguments);};}();if(openChat===true){return/*#__PURE__*/_jsx(\"div\",{className:\"ChatListAll\",children:Message.filter(function(element,index){return Message.indexOf(element)===index;}).map(function(data,index){return/*#__PURE__*/_jsxs(\"div\",{className:\"ChatList\",id:\"message\"+index,onClick:function onClick(){dispatch(open());dispatch(setMessageChat(data[3]));activeMessage(\"message\"+index);},children:[/*#__PURE__*/_jsx(\"div\",{className:\"avatar\",children:/*#__PURE__*/_jsx(\"img\",{src:\"data:image/jpeg;base64,\"+data[7],alt:\"avatar\",width:70})}),/*#__PURE__*/_jsxs(\"div\",{className:\"text\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"userName\",children:data[4]}),/*#__PURE__*/_jsx(\"p\",{className:\"lastMessage\",children:data[0]})]})]},index);})});}else{return null;}}","map":{"version":3,"names":["React","useSelector","useDispatch","open","setMessageChat","convertDate","GroupOpenMessage","props","openChat","state","value","idChat","dispatch","Message","data","sort","a","b","date","forEach","element","type","nameFrom","text","chatId","messageId","username","answers","comments","userAvatar","textPhoto","push","activeMessage","id","i","length","document","getElementById","style","backgroundColor","filter","index","indexOf","map"],"sources":["D:/Проекты/social-space/frontend/src/component/Group/GroupOpenMessage.jsx"],"sourcesContent":["import React from 'react';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { open } from '../../features/redux/openMessageSlice';\r\nimport { setMessageChat } from '../../features/redux/idMessageSlice';\r\nimport convertDate from '../../features/convertDate';\r\n\r\nexport default function GroupOpenMessage(props) {\r\n    const openChat = useSelector((state) => state.openChat.value)\r\n    const idChat = useSelector((state) => state.idChat.value)\r\n    const dispatch = useDispatch()\r\n  \r\n    let Message = [];\r\n\r\n    if(props.data != null){\r\n        props.data.sort(function(a,b){\r\n            if(a.date < b.date){\r\n                return 1;\r\n            }\r\n            if(a.date > b.date){\r\n                return -1;\r\n            }\r\n            return 0;\r\n            }).forEach(element => {\r\n            if((element.type === \"group\" && element.nameFrom === idChat) || (element.type === \"supergroup\" && element.nameFrom === idChat)){\r\n                if(element.text !== null){\r\n                    let data = [element.text, convertDate(element.date), element.chatId, element.messageId, element.username, element.answers, element.comments, element.userAvatar, element.textPhoto];\r\n                    Message.push(data);\r\n                } else{\r\n                    let data = [\"*Изображение\", convertDate(element.date), element.chatId, element.messageId, element.username, element.answers, element.comments, element.userAvatar, element.textPhoto];\r\n                    Message.push(data);\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    const activeMessage = async (id) => {\r\n        for(let i = 0; i <= Message.length; i++){\r\n            let element = document.getElementById(\"message\"+i);\r\n            if(element){\r\n                if(id === \"message\"+i){\r\n                    element.style.backgroundColor = \"#353535\";\r\n                } else{\r\n                    element.style.backgroundColor = null;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    if(openChat === true){\r\n        return(\r\n            <div className='ChatListAll'>\r\n            {Message.filter((element, index) => {\r\n                return Message.indexOf(element) === index;\r\n            }).map((data, index) => {\r\n                return (\r\n                    <div className=\"ChatList\" id={\"message\"+index} key = {index} onClick = {() => {\r\n                        dispatch(open());\r\n                        dispatch(setMessageChat(data[3]));\r\n                        activeMessage(\"message\"+index)\r\n                    }}>\r\n                        <div className='avatar'>\r\n                            <img src={ \"data:image/jpeg;base64,\" + data[7] } alt=\"avatar\" width={70}/>\r\n                        </div>\r\n                        <div className='text'>\r\n                            <p className='userName'>{ data[4] }</p>\r\n                            <p className='lastMessage'>{ data[0] }</p>\r\n                        </div>\r\n                    </div>\r\n                ) \r\n            }\r\n            )}\r\n            </div>\r\n        );\r\n    } else{\r\n        return null    \r\n    }\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}